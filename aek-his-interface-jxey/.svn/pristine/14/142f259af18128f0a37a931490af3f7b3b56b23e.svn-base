<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!--
操作相关SQL Mapper
@author Lanpz
@date 2016-08-04
@source Generated by MySQL2Java
-->

<!-- 此命名空间必须和对应Mapper.java文件的命名空间一致 -->
<mapper namespace="com.aek.persistence.mysql.mapper.MZyDetailChargeMapper">

    <!-- 栏位列表 -->
    <resultMap id="rm" type="com.aek.persistence.oracle.beans.ZyDetailCharge">
        <result property="patientNo" jdbcType="INTEGER" column="patient_no" />
        <result property="chargeCode" jdbcType="INTEGER" column="charge_code" />
        <result property="chargeName" jdbcType="VARCHAR" column="charge_name" />
        <result property="chargeDate" jdbcType="VARCHAR" column="charge_date" />
        <result property="sl" jdbcType="INTEGER" column="sl" />
        <result property="dj" jdbcType="INTEGER" column="dj" />
        <result property="type" jdbcType="INTEGER" column="type" />
        <result property="indicationNo" jdbcType="VARCHAR" column="indication_no" />
        <result property="indicationName" jdbcType="VARCHAR" column="indication_name" />
        <result property="deptNo" jdbcType="VARCHAR" column="dept_no" />
        <result property="chargeId" jdbcType="INTEGER" column="charge_id" />
        <result property="myId" jdbcType="INTEGER" column="my_id" />
    </resultMap>

    <!-- 获取 -->
    <select id="getZyDetailChargeList" resultMap="rm">
        SELECT *
          FROM bd_hpl_his_charge_detail
        WHERE charge_id IN 
        <foreach collection="list" item="item" separator="," open="(" close=")">
            #{item.chargeId}
        </foreach>
    </select>

    <!-- 添加 -->
    <insert id="addList" parameterType="java.util.List">
        INSERT INTO bd_hpl_his_charge_detail(patient_no,charge_code,charge_name,charge_date,sl,dj,type,indication_no,indication_name,dept_no,charge_id)
        VALUES 
        <foreach collection="list" item="item" separator=",">
        (#{item.patientNo},#{item.chargeCode},#{item.chargeName},#{item.chargeDate},#{item.sl},#{item.dj},#{item.type},#{item.indicationNo},#{item.indicationName},#{item.deptNo},#{item.chargeId})
        </foreach>
    </insert>

    <!-- 修改 -->
    <update id="updateList" parameterType="java.util.List">
        <foreach collection="list" item="item" separator=";">
        UPDATE bd_hpl_his_charge_detail
           SET patient_no=#{item.patientNo},
               charge_code=#{item.chargeCode},
               charge_name=#{item.chargeName},
               charge_date=#{item.chargeDate},
               sl=#{item.sl},
               dj=#{item.dj},
               type=#{item.type},
               indication_no=#{item.indicationNo},
               indication_name=#{item.indicationName},
               dept_no=#{item.deptNo}
        WHERE charge_id=#{item.chargeId}
        </foreach>
    </update>

</mapper>

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!--
病人收费信息操作相关SQL Mapper
@author Lanpz
@date 2016-08-04
@source Generated by MySQL2Java
-->

<!-- 此命名空间必须和对应Mapper.java文件的命名空间一致 -->
<mapper namespace="com.aek.persistence.oracle.mapper.OZyChargeInterfaceMapper">

    <!-- 病人收费信息栏位列表 -->
    <resultMap id="rm" type="com.aek.persistence.oracle.beans.ZyChargeInterface">
        <result property="id" jdbcType="INTEGER" column="id" />
        <result property="oldid" jdbcType="INTEGER" column="oldid" />
        <result property="medicardno" jdbcType="VARCHAR" column="medicardno" />
        <result property="patientno" jdbcType="INTEGER" column="patientno" />
        <result property="infantflag" jdbcType="INTEGER" column="infantflag" />
        <result property="chargecode" jdbcType="INTEGER" column="chargecode" />
        <result property="chargename" jdbcType="VARCHAR" column="chargename" />
        <result property="systemtype" jdbcType="VARCHAR" column="systemtype" />
        <result property="systemid" jdbcType="VARCHAR" column="systemid" />
        <result property="chargedate" jdbcType="VARCHAR" column="chargedate" />
        <result property="amount" jdbcType="DOUBLE" column="amount" />
        <result property="price" jdbcType="DOUBLE" column="price" />
        <result property="fee" jdbcType="DOUBLE" column="fee" />
        <result property="doctorid" jdbcType="VARCHAR" column="doctorid" />
        <result property="executdept" jdbcType="VARCHAR" column="executdept" />
        <result property="admisssickroom" jdbcType="VARCHAR" column="admisssickroom" />
        <result property="admisssickdept" jdbcType="VARCHAR" column="admisssickdept" />
        <result property="operatid" jdbcType="VARCHAR" column="operatid" />
        <result property="auditid" jdbcType="VARCHAR" column="auditid" />
        <result property="sendflag" jdbcType="INTEGER" column="sendflag" />
        <result property="beinhosflag" jdbcType="INTEGER" column="beinhosflag" />
        <result property="operatedate" jdbcType="VARCHAR" column="operatedate" />
        <result property="concurflag" jdbcType="VARCHAR" column="concurflag" />
        <result property="invoiceNo" jdbcType="VARCHAR" column="invoice_no" />
        <result property="invoiceDoctorcode" jdbcType="VARCHAR" column="invoice_doctorcode" />
        <result property="invoiceChargedate" jdbcType="VARCHAR" column="invoice_chargedate" />
        <result property="bxDate" jdbcType="VARCHAR" column="bx_date" />
        <result property="ypcddm" jdbcType="INTEGER" column="ypcddm" />
        <result property="ypxh" jdbcType="INTEGER" column="ypxh" />
        <result property="tcdm" jdbcType="VARCHAR" column="tcdm" />
        <result property="zlybdm" jdbcType="VARCHAR" column="zlybdm" />
        <result property="fybh" jdbcType="INTEGER" column="fybh" />
    </resultMap>

    <!-- 获取病人收费信息 -->
    <select id="getList" resultMap="rm" parameterType="java.util.List">
        SELECT *
          FROM his_charge_interface
         WHERE id IN
        <foreach collection="list" item="item" separator="," open="(" close=")">
            #{item.id}
        </foreach>
    </select>

    <!-- 添加病人收费信息 -->
    <insert id="insert" parameterType="com.aek.persistence.oracle.beans.ZyChargeInterface">
        INSERT INTO his_charge_interface(id,oldid,medicardno,patientno,infantflag,chargecode,chargename,systemtype,systemid,chargedate,amount,price,fee,doctorid,executdept,admisssickroom,admisssickdept,operatid,auditid,sendflag,beinhosflag,operatedate,concurflag,invoice_no,invoice_doctorcode,invoice_chargedate,bx_date,ypcddm,ypxh,tcdm,zlybdm,fybh)
        SELECT 
        #{id, jdbcType=INTEGER},
        #{oldid, jdbcType=INTEGER},
        #{medicardno, jdbcType=VARCHAR},
        #{patientno, jdbcType=INTEGER},
        #{infantflag, jdbcType=INTEGER},
        #{chargecode, jdbcType=INTEGER},
        #{chargename, jdbcType=VARCHAR},
        #{systemtype, jdbcType=VARCHAR},
        #{systemid, jdbcType=VARCHAR},
        to_date(#{chargedate, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
        #{amount, jdbcType=DOUBLE},
        #{price, jdbcType=DOUBLE},
        #{fee, jdbcType=DOUBLE},
        #{doctorid, jdbcType=VARCHAR},
        #{executdept, jdbcType=VARCHAR},
        #{admisssickroom, jdbcType=VARCHAR},
        #{admisssickdept, jdbcType=VARCHAR},
        #{operatid, jdbcType=VARCHAR},
        #{auditid, jdbcType=VARCHAR},
        #{sendflag, jdbcType=INTEGER},
        #{beinhosflag, jdbcType=INTEGER},
        to_date(#{operatedate, jdbcType=VARCHAR} , 'yyyy-MM-dd HH24:MI:SS'),
        #{concurflag, jdbcType=VARCHAR},
        #{invoiceNo, jdbcType=VARCHAR},
        #{invoiceDoctorcode, jdbcType=VARCHAR},
        to_date(#{invoiceChargedate, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
        to_date(#{bxDate, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
        #{ypcddm, jdbcType=INTEGER},
        #{ypxh, jdbcType=INTEGER},
        #{tcdm, jdbcType=VARCHAR},
        #{zlybdm, jdbcType=VARCHAR},
        #{fybh, jdbcType=INTEGER}
         FROM dual
    </insert>

    <!-- 添加病人收费信息 -->
    <insert id="addList" parameterType="java.util.List">
        INSERT INTO his_charge_interface(id,oldid,medicardno,patientno,infantflag,chargecode,chargename,systemtype,systemid,chargedate,amount,price,fee,doctorid,executdept,admisssickroom,admisssickdept,operatid,auditid,sendflag,beinhosflag,operatedate,concurflag,invoice_no,invoice_doctorcode,invoice_chargedate,bx_date,ypcddm,ypxh,tcdm,zlybdm,fybh)
        <foreach collection="list" item="item" separator=" union all ">
        SELECT 
        #{item.id, jdbcType=INTEGER},
        #{item.oldid, jdbcType=INTEGER},
        #{item.medicardno, jdbcType=VARCHAR},
        #{item.patientno, jdbcType=INTEGER},
        #{item.infantflag, jdbcType=INTEGER},
        #{item.chargecode, jdbcType=INTEGER},
        #{item.chargename, jdbcType=VARCHAR},
        #{item.systemtype, jdbcType=VARCHAR},
        #{item.systemid, jdbcType=VARCHAR},
        #{item.chargedate, jdbcType=VARCHAR},
        #{item.amount, jdbcType=DOUBLE},
        #{item.price, jdbcType=DOUBLE},
        #{item.fee, jdbcType=DOUBLE},
        #{item.doctorid, jdbcType=VARCHAR},
        #{item.executdept, jdbcType=VARCHAR},
        #{item.admisssickroom, jdbcType=VARCHAR},
        #{item.admisssickdept, jdbcType=VARCHAR},
        #{item.operatid, jdbcType=VARCHAR},
        #{item.auditid, jdbcType=VARCHAR},
        #{item.sendflag, jdbcType=INTEGER},
        #{item.beinhosflag, jdbcType=INTEGER},
        #{item.operatedate, jdbcType=VARCHAR},
        #{item.concurflag, jdbcType=VARCHAR},
        #{item.invoiceNo, jdbcType=VARCHAR},
        #{item.invoiceDoctorcode, jdbcType=VARCHAR},
        #{item.invoiceChargedate, jdbcType=VARCHAR},
        #{item.bxDate, jdbcType=VARCHAR},
        #{item.ypcddm, jdbcType=INTEGER},
        #{item.ypxh, jdbcType=INTEGER},
        #{item.tcdm, jdbcType=VARCHAR},
        #{item.zlybdm, jdbcType=VARCHAR},
        #{item.fybh, jdbcType=INTEGER} 
        FROM dual
        </foreach>
    </insert>

    <!-- 修改病人收费信息 -->
    <update id="updateList" parameterType="java.util.List">
    BEGIN
    <foreach collection="list" item="item" separator=";">
        UPDATE his_charge_interface
           SET oldid=#{item.oldid, jdbcType=INTEGER},
               medicardno=#{item.medicardno, jdbcType=VARCHAR},
               patientno=#{item.patientno, jdbcType=INTEGER},
               infantflag=#{item.infantflag, jdbcType=INTEGER},
               chargecode=#{item.chargecode, jdbcType=INTEGER},
               chargename=#{item.chargename, jdbcType=VARCHAR},
               systemtype=#{item.systemtype, jdbcType=VARCHAR},
               systemid=#{item.systemid, jdbcType=VARCHAR},
               chargedate=to_date(#{item.chargedate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               amount=#{item.amount, jdbcType=DOUBLE},
               price=#{item.price, jdbcType=DOUBLE},
               fee=#{item.fee, jdbcType=DOUBLE},
               doctorid=#{item.doctorid, jdbcType=VARCHAR},
               executdept=#{item.executdept, jdbcType=VARCHAR},
               admisssickroom=#{item.admisssickroom, jdbcType=VARCHAR},
               admisssickdept=#{item.admisssickdept, jdbcType=VARCHAR},
               operatid=#{item.operatid, jdbcType=VARCHAR},
               auditid=#{item.auditid, jdbcType=VARCHAR},
               sendflag=#{item.sendflag, jdbcType=INTEGER},
               beinhosflag=#{item.beinhosflag, jdbcType=INTEGER},
               operatedate=to_date(#{item.operatedate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               concurflag=#{item.concurflag, jdbcType=VARCHAR},
               invoice_no=#{item.invoiceNo, jdbcType=VARCHAR},
               invoice_doctorcode=#{item.invoiceDoctorcode, jdbcType=VARCHAR},
               invoice_chargedate=to_date(#{item.invoiceChargedate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               bx_date=to_date(#{item.bxDate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               ypcddm=#{item.ypcddm, jdbcType=INTEGER},
               ypxh=#{item.ypxh, jdbcType=INTEGER},
               tcdm=#{item.tcdm, jdbcType=VARCHAR},
               zlybdm=#{item.zlybdm, jdbcType=VARCHAR},
               fybh=#{item.fybh, jdbcType=INTEGER}
         WHERE id=#{item.id, jdbcType=INTEGER}
    </foreach>
    ;END;
    </update>
    
    <!-- 修改病人收费信息 -->
    <update id="update" parameterType="com.aek.persistence.oracle.beans.ZyChargeInterface">
        UPDATE zy_charge_info
           SET oldid=#{oldid, jdbcType=INTEGER},
               medicardno=#{medicardno, jdbcType=VARCHAR},
               patientno=#{patientno, jdbcType=INTEGER},
               infantflag=#{infantflag, jdbcType=INTEGER},
               chargecode=#{chargecode, jdbcType=INTEGER},
               chargename=#{chargename, jdbcType=VARCHAR},
               systemtype=#{systemtype, jdbcType=VARCHAR},
               systemid=#{systemid, jdbcType=VARCHAR},
                amount=#{amount, jdbcType=DOUBLE},
               price=#{price, jdbcType=DOUBLE},
               fee=#{fee, jdbcType=DOUBLE},
               doctorid=#{doctorid, jdbcType=VARCHAR},
               executdept=#{executdept, jdbcType=VARCHAR},
               admisssickroom=#{admisssickroom, jdbcType=VARCHAR},
               admisssickdept=#{admisssickdept, jdbcType=VARCHAR},
               operatid=#{operatid, jdbcType=VARCHAR},
               auditid=#{auditid, jdbcType=VARCHAR},
               sendflag=#{sendflag, jdbcType=INTEGER},
               beinhosflag=#{beinhosflag, jdbcType=INTEGER},
               operatedate=to_date(#{operatedate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               concurflag=#{concurflag, jdbcType=VARCHAR},
               invoice_no=#{invoiceNo, jdbcType=VARCHAR},
               invoice_doctorcode=#{invoiceDoctorcode, jdbcType=VARCHAR},
               invoice_chargedate=to_date(#{invoiceChargedate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               bx_date=to_date(#{bxDate, jdbcType=VARCHAR}, 'yyyy-mm-dd'),
               ypcddm=#{ypcddm, jdbcType=INTEGER},
               ypxh=#{ypxh, jdbcType=INTEGER},
               tcdm=#{tcdm, jdbcType=VARCHAR},
               zlybdm=#{zlybdm, jdbcType=VARCHAR},
               fybh=#{fybh, jdbcType=INTEGER}
         WHERE id = #{id, jdbcType=INTEGER}
    </update>

</mapper>

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!--
物资规格。操作相关SQL Mapper
@author Lanpz
@date 2016-12-15
@source Generated by MySQL2Java
-->

<!-- 此命名空间必须和对应Mapper.java文件的命名空间一致 -->
<mapper namespace="com.aek.persistence.oracle.mapper.OHplGoodsSpecsMapper">

    <!-- 物资规格。栏位列表 -->
    <resultMap id="rm" type="com.aek.persistence.oracle.beans.BdHplGoodsSpecs">
        <result property="specId" jdbcType="BIGINT" column="spec_id" />
        <result property="sysId" jdbcType="BIGINT" column="sys_id" />
        <result property="areaId" jdbcType="INTEGER" column="area_id" />
        <result property="classId" jdbcType="BIGINT" column="class_id" />
        <result property="className" jdbcType="VARCHAR" column="class_name"/> 
        <result property="goodsId" jdbcType="BIGINT" column="goods_id" />
        <result property="goodsName" jdbcType="VARCHAR" column="goods_name"/>
        <result property="goodsType" jdbcType="INTEGER" column="goods_type" />
        <result property="specGuid" jdbcType="VARCHAR" column="spec_guid" />
        <result property="specNo" jdbcType="VARCHAR" column="spec_no" />
        <result property="specBarcode" jdbcType="VARCHAR" column="spec_barcode" />
        <result property="specBarcodeType" jdbcType="INTEGER" column="spec_barcode_type" />
        <result property="specModel" jdbcType="VARCHAR" column="spec_model" />
        <result property="specCommonName" jdbcType="VARCHAR" column="spec_common_name" />
        <result property="specNameEn" jdbcType="VARCHAR" column="spec_name_en" />
        <result property="specNameCn" jdbcType="VARCHAR" column="spec_name_cn" />
        <result property="specPackage" jdbcType="VARCHAR" column="spec_package" />
        <result property="specBigpackstr" jdbcType="VARCHAR" column="spec_bigpackstr" />
        <result property="specBasepackstr" jdbcType="VARCHAR" column="spec_basepackstr" />
        <result property="specBasepackNo" jdbcType="INTEGER" column="spec_basepack_no" />
        <result property="specBasepackNote" jdbcType="VARCHAR" column="spec_basepack_note" />
        <result property="specMinipackstr" jdbcType="VARCHAR" column="spec_minipackstr" />
        <result property="specMiniunit" jdbcType="DOUBLE" column="spec_miniunit" />
        <result property="specDosetype" jdbcType="INTEGER" column="spec_dosetype" />
        <result property="specDose" jdbcType="INTEGER" column="spec_dose" />
        <result property="specDoseuintstr" jdbcType="VARCHAR" column="spec_doseuintstr" />
        <result property="specUsagefunc" jdbcType="INTEGER" column="spec_usagefunc" />
        <result property="specUsages" jdbcType="VARCHAR" column="spec_usages" />
        <result property="instructions" jdbcType="VARCHAR" column="instructions" />
        <result property="chargeFlag" jdbcType="INTEGER" column="charge_flag" />
        <result property="managementFlag" jdbcType="INTEGER" column="management_flag" />
        <result property="medicareFlag" jdbcType="INTEGER" column="medicare_flag" />
        <result property="bidType" jdbcType="INTEGER" column="bid_type" />
        <result property="bidDate" jdbcType="VARCHAR" column="bid_date_format" />
        <result property="bidExpiredDate" jdbcType="VARCHAR" column="bid_expired_date_format" />
        <result property="bidFlag" jdbcType="INTEGER" column="bid_flag" />
        <result property="salePrice" jdbcType="DOUBLE" column="sale_price" />
        <result property="salePriceCurrencyId" jdbcType="BIGINT" column="sale_price_currency_id" />
        <result property="salePriceCurrencyName" jdbcType="VARCHAR" column="sale_price_currency_name" />
        <result property="regId" jdbcType="BIGINT" column="reg_id" />
        <result property="regNo" jdbcType="VARCHAR" column="reg_no"/>
        <result property="goodsUnitId" jdbcType="BIGINT" column="goods_unit_id" />
        <result property="goodsUnitName" jdbcType="VARCHAR" column="goods_unit_name" />
        <result property="bidPrice" jdbcType="DOUBLE" column="bid_price" />
        <result property="bidPriceCurrencyId" jdbcType="BIGINT" column="bid_price_currency_id" />
        <result property="bidPriceCurrencyName" jdbcType="VARCHAR" column="bid_price_currency_name" />
        <result property="unitPrice" jdbcType="DOUBLE" column="unit_price" />
        <result property="unitPriceCurrencyId" jdbcType="BIGINT" column="unit_price_currency_id" />
        <result property="unitPriceCurrencyName" jdbcType="VARCHAR" column="unit_price_currency_name"/>
        <result property="inviteNo" jdbcType="VARCHAR" column="invite_no" />
        <result property="inviteFileno" jdbcType="VARCHAR" column="invite_fileno" />
        <result property="repeatNo" jdbcType="INTEGER" column="repeat_no" />
        <result property="repeatPrice" jdbcType="DOUBLE" column="repeat_price" />
        <result property="repeatPay" jdbcType="DOUBLE" column="repeat_pay" />
        <result property="addBy" jdbcType="BIGINT" column="add_by" />
        <result property="addName" jdbcType="VARCHAR" column="add_name" />
        <result property="addTime" jdbcType="VARCHAR" column="add_time_format" />
        <result property="lastEditBy" jdbcType="BIGINT" column="last_edit_by" />
        <result property="lastEditName" jdbcType="VARCHAR" column="last_edit_name" />
        <result property="lastEditTime" jdbcType="VARCHAR" column="last_time_format" />
        <result property="sourceFlag" jdbcType="INTEGER" column="source_flag" />
        <result property="delFlag" jdbcType="INTEGER" column="del_flag" />
    </resultMap>

    <!-- 获取物资规格。 -->
    <select id="getSpecList" resultMap="rm" parameterType="java.util.List">
        SELECT *
          FROM bd_hpl_goods_specs
         WHERE spec_id IN
        <foreach collection="list" item="item" separator="," open="(" close=")">
            #{item.specId}
        </foreach>
    </select>
    
    <select id="getCount" resultType="int">
        SELECT count(*) 
          FROM bd_hpl_goods_specs
    </select>

    <!-- 添加物资规格。 -->
    <insert id="insertList" parameterType="java.util.List">
        INSERT INTO bd_hpl_goods_specs(spec_id,sys_id,area_id,class_id,class_name,goods_id,goods_name,goods_type,spec_guid,spec_no,spec_barcode,spec_barcode_type,spec_model,spec_common_name,spec_name_en,spec_name_cn,spec_package,spec_bigpackstr,spec_basepackstr,spec_basepack_no,spec_basepack_note,spec_minipackstr,spec_miniunit,spec_dosetype,spec_dose,spec_doseuintstr,spec_usagefunc,spec_usages,instructions,charge_flag,management_flag,medicare_flag,bid_type,bid_date,bid_expired_date,bid_flag,sale_price,sale_price_currency_id,sale_price_currency_name,reg_id,reg_no,goods_unit_id,goods_unit_name,bid_price,bid_price_currency_id,bid_price_currency_name,unit_price,unit_price_currency_id,unit_price_currency_name,invite_no,invite_fileno,repeat_no,repeat_price,repeat_pay,add_by,add_name,add_time,last_edit_by,last_edit_name,last_edit_time,source_flag,del_flag)
        <foreach collection="list" item="item" separator=" union all ">
        SELECT #{item.specId, jdbcType=BIGINT},
               #{item.sysId, jdbcType=BIGINT},
               #{item.areaId, jdbcType=INTEGER},
               #{item.classId, jdbcType=BIGINT},
               #{item.className, jdbcType=VARCHAR},
               #{item.goodsId, jdbcType=BIGINT},
               #{item.goodsName, jdbcType=VARCHAR},
               #{item.goodsType, jdbcType=INTEGER},
               #{item.specGuid, jdbcType=VARCHAR},
               #{item.specNo, jdbcType=VARCHAR},
               #{item.specBarcode, jdbcType=VARCHAR},
               #{item.specBarcodeType, jdbcType=INTEGER},
               #{item.specModel, jdbcType=VARCHAR},
               #{item.specCommonName,jdbcType=VARCHAR},
               #{item.specNameEn, jdbcType=VARCHAR},
               #{item.specNameCn, jdbcType=VARCHAR},
               #{item.specPackage, jdbcType=VARCHAR},
               #{item.specBigpackstr, jdbcType=VARCHAR},
               #{item.specBasepackstr, jdbcType=VARCHAR},
               #{item.specBasepackNo, jdbcType=INTEGER},
               #{item.specBasepackNote, jdbcType=VARCHAR},
               #{item.specMinipackstr, jdbcType=VARCHAR},
               #{item.specMiniunit, jdbcType=DOUBLE},
               #{item.specDosetype, jdbcType=INTEGER},
               #{item.specDose, jdbcType=INTEGER},
               #{item.specDoseuintstr, jdbcType=VARCHAR},
               #{item.specUsagefunc, jdbcType=INTEGER},
               #{item.specUsages, jdbcType=VARCHAR},
               #{item.instructions, jdbcType=VARCHAR},
               #{item.chargeFlag, jdbcType=INTEGER},
               #{item.managementFlag, jdbcType=INTEGER},
               #{item.medicareFlag, jdbcType=INTEGER},
               #{item.bidType, jdbcType=INTEGER},
               to_date(#{item.bidDate, jdbcType=VARCHAR},'yyyy-MM-dd HH24:MI:SS'),
               to_date(#{item.bidExpiredDate, jdbcType=VARCHAR},'yyyy-MM-dd HH24:MI:SS'),
               #{item.bidFlag, jdbcType=INTEGER},
               #{item.salePrice, jdbcType=DOUBLE},
               #{item.salePriceCurrencyId, jdbcType=BIGINT},
               #{item.salePriceCurrencyName, jdbcType=VARCHAR},
               #{item.regId, jdbcType=BIGINT},
               #{item.regNo, jdbcType=VARCHAR},
               #{item.goodsUnitId, jdbcType=BIGINT},
               #{item.goodsUnitName, jdbcType=VARCHAR},
               #{item.bidPrice, jdbcType=DOUBLE},
               #{item.bidPriceCurrencyId, jdbcType=BIGINT},
               #{item.bidPriceCurrencyName, jdbcType=VARCHAR},
               #{item.unitPrice, jdbcType=DOUBLE},
               #{item.unitPriceCurrencyId, jdbcType=BIGINT},
               #{item.unitPriceCurrencyName, jdbcType=VARCHAR},
               #{item.inviteNo, jdbcType=VARCHAR},
               #{item.inviteFileno, jdbcType=VARCHAR},
               #{item.repeatNo, jdbcType=INTEGER},
               #{item.repeatPrice, jdbcType=DOUBLE},
               #{item.repeatPay, jdbcType=DOUBLE},
               #{item.addBy, jdbcType=BIGINT},
               #{item.addName, jdbcType=VARCHAR},
               to_date(#{item.addTime, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
               #{item.lastEditBy, jdbcType=BIGINT},
               #{item.lastEditName, jdbcType=VARCHAR},
               to_date(#{item.lastEditTime, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
               #{item.sourceFlag, jdbcType=INTEGER},
               #{item.delFlag, jdbcType=INTEGER} 
        FROM dual
        </foreach>
    </insert>
    
    
    <!-- 修改物资规格。 -->
    <update id="updateList" parameterType="java.util.List">
    <foreach collection="list" item="item" separator=";" open="BEGIN " close=";END;">
        UPDATE bd_hpl_goods_specs
           SET class_id=#{item.classId, jdbcType=BIGINT},
               class_name=#{item.className, jdbcType=VARCHAR},
               goods_id=#{item.goodsId, jdbcType=BIGINT},
               goods_name=#{item.goodsName, jdbcType=VARCHAR},
               goods_type=#{item.goodsType, jdbcType=INTEGER},
               spec_guid=#{item.specGuid, jdbcType=VARCHAR},
               spec_no=#{item.specNo, jdbcType=VARCHAR},
               spec_barcode=#{item.specBarcode, jdbcType=VARCHAR},
               spec_barcode_type=#{item.specBarcodeType, jdbcType=INTEGER},
               spec_model=#{item.specModel, jdbcType=VARCHAR},
               spec_common_name=#{item.specCommonName,jdbcType=VARCHAR},
               spec_name_en=#{item.specNameEn, jdbcType=VARCHAR},
               spec_name_cn=#{item.specNameCn, jdbcType=VARCHAR},
               spec_package=#{item.specPackage, jdbcType=VARCHAR},
               spec_bigpackstr=#{item.specBigpackstr, jdbcType=VARCHAR},
               spec_basepackstr=#{item.specBasepackstr, jdbcType=VARCHAR},
               spec_basepack_no=#{item.specBasepackNo, jdbcType=INTEGER},
               spec_basepack_note=#{item.specBasepackNote, jdbcType=VARCHAR},
               spec_minipackstr=#{item.specMinipackstr, jdbcType=VARCHAR},
               spec_miniunit=#{item.specMiniunit, jdbcType=DOUBLE},
               spec_dosetype=#{item.specDosetype, jdbcType=INTEGER},
               spec_dose=#{item.specDose, jdbcType=INTEGER},
               spec_doseuintstr=#{item.specDoseuintstr, jdbcType=VARCHAR},
               spec_usagefunc=#{item.specUsagefunc, jdbcType=INTEGER},
               spec_usages=#{item.specUsages, jdbcType=VARCHAR},
               instructions=#{item.instructions, jdbcType=VARCHAR},
               charge_flag=#{item.chargeFlag, jdbcType=INTEGER},
               management_flag=#{item.managementFlag, jdbcType=INTEGER},
               medicare_flag=#{item.medicareFlag, jdbcType=INTEGER},
               bid_type=#{item.bidType, jdbcType=INTEGER},
               bid_date=to_date(#{item.bidDate, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
               bid_expired_date=to_date(#{item.bidExpiredDate, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
               bid_flag=#{item.bidFlag, jdbcType=INTEGER},
               sale_price=#{item.salePrice, jdbcType=DOUBLE},
               sale_price_currency_id=#{item.salePriceCurrencyId, jdbcType=BIGINT},
               sale_price_currency_name=#{item.salePriceCurrencyName, jdbcType=VARCHAR},
               reg_id=#{item.regId, jdbcType=BIGINT},
               reg_no=#{item.regNo, jdbcType=VARCHAR},
               goods_unit_id=#{item.goodsUnitId, jdbcType=BIGINT},
               goods_unit_name=#{item.goodsUnitName, jdbcType=VARCHAR},
               bid_price=#{item.bidPrice, jdbcType=DOUBLE},
               bid_price_currency_id=#{item.bidPriceCurrencyId, jdbcType=BIGINT},
               bid_price_currency_name=#{item.bidPriceCurrencyName, jdbcType=VARCHAR},
               unit_price=#{item.unitPrice, jdbcType=DOUBLE},
               unit_price_currency_id=#{item.unitPriceCurrencyId, jdbcType=BIGINT},
               unit_price_currency_name=#{item.unitPriceCurrencyName, jdbcType=VARCHAR},
               invite_no=#{item.inviteNo, jdbcType=VARCHAR},
               invite_fileno=#{item.inviteFileno, jdbcType=VARCHAR},
               repeat_no=#{item.repeatNo, jdbcType=INTEGER},
               repeat_price=#{item.repeatPrice, jdbcType=DOUBLE},
               repeat_pay=#{item.repeatPay, jdbcType=DOUBLE},
               last_edit_by=#{item.lastEditBy, jdbcType=BIGINT},
               last_edit_name=#{item.lastEditName, jdbcType=VARCHAR},
               last_edit_time=to_date(#{item.lastEditTime, jdbcType=VARCHAR}, 'yyyy-MM-dd HH24:MI:SS'),
               source_flag=#{item.sourceFlag, jdbcType=INTEGER},
               del_flag=#{item.delFlag, jdbcType=INTEGER} 
         WHERE spec_id = #{item.specId, jdbcType=BIGINT}
           AND sys_id = #{item.sysId, jdbcType=BIGINT}
           AND area_id = #{item.areaId, jdbcType=INTEGER}
    </foreach>
    </update>

</mapper>

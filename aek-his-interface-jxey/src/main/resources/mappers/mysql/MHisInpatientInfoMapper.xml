<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!--
手术病人信息视图操作相关SQL Mapper
@author Lanpz
@date 2016-08-02
@source Generated by MySQL2Java
-->

<!-- 此命名空间必须和对应Mapper.java文件的命名空间一致 -->
<mapper namespace="com.aek.persistence.mysql.mapper.MHisInpatientInfoMapper">

    <!-- 手术病人信息视图栏位列表 -->
    <resultMap id="rm" type="com.aek.persistence.oracle.beans.HisInpatientInfo">
        <result property="inpatientNo" jdbcType="VARCHAR" column="inpatient_no" />
        <result property="patientName" jdbcType="VARCHAR" column="patient_name" />
        <result property="bedNo" jdbcType="VARCHAR" column="bed_no" />
        <result property="operationName" jdbcType="VARCHAR" column="operation_name" />
        <result property="operationDate" jdbcType="VARCHAR" column="operation_date" />
        <result property="happenDate" jdbcType="VARCHAR" column="happen_date" />
        <result property="operationDoctorNo" jdbcType="VARCHAR" column="operation_doctor_no" />
        <result property="operationDoctorName" jdbcType="VARCHAR" column="operation_doctor_name" />
        <result property="deptNo" jdbcType="VARCHAR" column="dept_no" />
        <result property="deptName" jdbcType="VARCHAR" column="dept_name" />
        <result property="patientNo" jdbcType="INTEGER" column="patient_no" />
        <result property="outFlag" jdbcType="INTEGER" column="js_no" />
        <result property="newOperationNo" jdbcType="VARCHAR" column="new_operation_no" />
        <result property="newOperationName" jdbcType="VARCHAR" column="new_operation_name" />
        <result property="operationId" jdbcType="INTEGER" column="operation_id" />
        <result property="outDate" jdbcType="VARCHAR" column="out_date" />
        <result property="infantFlag" jdbcType="INTEGER" column="infant_flag" />
        <result property="currentDeptNo" jdbcType="VARCHAR" column="current_dept_no" />
        <result property="currentDeptName" jdbcType="VARCHAR" column="current_dept_name" />
        <result property="operationRoomName" jdbcType="VARCHAR" column="operation_room_name" />
        <result property="operationIndex" jdbcType="VARCHAR" column="operation_index" />
        <result property="patientSex" jdbcType="INTEGER" column="patient_sex" />
        <result property="patientAge" jdbcType="INTEGER" column="patient_age" />
        <result property="operationDiagnose" jdbcType="VARCHAR" column="operation_diagnose" />
        <result property="sickInfectFlag" jdbcType="VARCHAR" column="sick_infect_flag" />
    </resultMap>

    <!-- 获取手术病人信息视图 -->
    <select id="getAll" resultMap="rm">
        SELECT *
          FROM bd_hpl_his_inpatient_info
         WHERE operation_id IN 
         <foreach collection="list" item="item" separator="," open="(" close=")">
         #{item.operationId}
         </foreach>
    </select>

    <!-- 添加手术病人信息视图 -->
    <insert id="addList" parameterType="java.util.List">
        INSERT INTO bd_hpl_his_inpatient_info(inpatient_no,patient_name,bed_no,operation_name,operation_date,happen_date,operation_doctor_no,operation_doctor_name,dept_no,dept_name,patient_no,js_no,new_operation_no,new_operation_name,operation_id,out_date,infant_flag,current_dept_no,current_dept_name,operation_room_name,operation_index,patient_sex,patient_age,operation_diagnose,sick_infect_flag)
        VALUES 
        <foreach collection="list" item="item" separator=",">
        (#{item.inpatientNo},#{item.patientName},#{item.bedNo},#{item.operationName},#{item.operationDate},
        #{item.happenDate},#{item.operationDoctorNo},#{item.operationDoctorName},#{item.deptNo},
        #{item.deptName},#{item.patientNo},#{item.outFlag},#{item.newOperationNo},#{item.newOperationName},
        #{item.operationId},#{item.outDate},#{item.infantFlag},#{item.currentDeptNo},#{item.currentDeptName},
        #{item.operationRoomName},#{item.operationIndex},#{item.patientSex},#{item.patientAge},
        #{item.operationDiagnose},#{item.sickInfectFlag})
        </foreach>
    </insert>

    <!-- 修改手术病人信息视图 -->
    <update id="updateList" parameterType="java.util.List">
    <foreach collection="list" item="item" separator=";">
        UPDATE bd_hpl_his_inpatient_info
           SET inpatient_no=#{item.inpatientNo},
               patient_name=#{item.patientName},
               bed_no=#{item.bedNo},
               operation_name=#{item.operationName},
               operation_date=#{item.operationDate},
               happen_date=#{item.happenDate},
               operation_doctor_no=#{item.operationDoctorNo},
               operation_doctor_name=#{item.operationDoctorName},
               dept_no=#{item.deptNo},
               dept_name=#{item.deptName},
               patient_no=#{item.patientNo},
               js_no=#{item.outFlag},
               new_operation_no=#{item.newOperationNo},
               new_operation_name=#{item.newOperationName},
               operation_id=#{item.operationId},
               out_date=#{item.outDate},
               infant_flag=#{item.infantFlag},
               current_dept_no=#{item.currentDeptNo},
               current_dept_name=#{item.currentDeptName},
               operation_room_name=#{item.operationRoomName},
               operation_index=#{item.operationIndex},
               patient_sex=#{item.patientSex},
               patient_age=#{item.patientAge},
               operation_diagnose=#{item.operationDiagnose},
               sick_infect_flag=#{item.sickInfectFlag}
         WHERE operation_id = #{item.operationId}
     </foreach>
    </update>

</mapper>
